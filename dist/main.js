(()=>{"use strict";class e{constructor(t,n,c,i){this.id=e.id,e.id++,this.title=t,this.desc=n,this.dueDate=c,this.priority=i,this.checklist=[],this.isComplete=!1}addToChecklist(e){this.checklist.push(e)}}e.id=0;class t{constructor(e){this.id=t.id,t.id++,this.name=e,this.tasks=[]}addTask(e){this.tasks.push(e)}deleteTask(e){this.tasks.splice(this.tasks.indexOf(e),1)}}t.id=0;const n=document.querySelector(".tasks h2");function c(e){n.textContent=e.name,e.tasks.forEach((e=>f(e)))}function i(){n.textContent="",h().tasks.forEach((e=>{v(e.id)}))}const o=document.querySelector(".projects"),s=document.querySelector(".new-project-btn"),d=document.querySelector(".new-project-input"),l=document.getElementById("new-project"),r=document.querySelector(".add-project-btn"),a=document.querySelector(".cancel-project-btn"),u=new class{constructor(){this.projects=[]}addProject(e){this.projects.push(e)}deleteProject(e){this.projects.splice(this.projects.indexOf(e),1)}};let m;function h(){return m}function p(e){const t=document.createElement("div");t.setAttribute("data-proj",e.id);const n=document.createElement("span"),d=e.name;t.append(n,d),o.insertBefore(t,s),t.addEventListener("click",(()=>{i(),c(e),m=e}))}function k(){s.style.display="inline",d.style.display="none",l.value=""}s.addEventListener("click",(function(){s.style.display="none",d.style.display="block"})),r.addEventListener("click",(function(){if(l.value){const e=new t(l.value);u.addProject(e),p(e),i(),c(e),m=e,k()}})),a.addEventListener("click",k),function(){const e=new t("tasks");m=e,p(e),c(e)}();const y=document.querySelector(".tasks");function f(e){const t=document.createElement("div");t.setAttribute("data-task-id",e.id),t.classList.add("task");const n=document.createElement("div");n.classList.add("collapsible-items");const c=document.createElement("h4");c.textContent=e.title;const i=document.createElement("button");i.textContent="edit",i.addEventListener("click",A.bind(this,e));const o=document.createElement("button");o.textContent="delete",o.addEventListener("click",E.bind(this,e));const s=document.createElement("p");s.textContent=e.desc;const d=document.createElement("p");d.textContent=e.dueDate;const l=document.createElement("p");l.textContent=e.priority;const r=document.createElement("ul");e.checklist.forEach((e=>{const t=document.createElement("li");t.textContent=e,r.appendChild(t)}));const a=document.createElement("input");a.setAttribute("type","checkbox"),a.checked=e.isComplete,n.append(s,l,r,i,o),n.style.display="none",t.append(a,c,d,n),t.addEventListener("click",C);let u=document.querySelector(`[data-task-id='${e.id+1}']`);u?y.insertBefore(t,u):y.appendChild(t)}function v(e){const t=document.querySelector(`[data-task-id='${e}']`);for(t.removeEventListener("click",C);t.firstChild;)t.removeChild(t.firstChild);y.removeChild(t)}function E(e){v(e.id),h().deleteTask(e)}function C(e){if(e.target!==this.querySelector("input")&&e.target!==this.querySelector("button")){const e=this.querySelector(".collapsible-items");e.style.display="none"===e.style.display?"block":"none"}}const b=document.querySelector("form"),q=document.getElementById("title"),S=document.getElementById("description"),x=document.getElementById("due-date"),L=document.getElementById("checklist"),j=document.querySelector(".checklist-items"),g=document.querySelectorAll('[type="radio"]'),w=b.querySelector("h3"),B=b.querySelector(".checklist-btn"),T=b.querySelector(".confirm-btn");let I;function A(e){e&&function(e){q.value=e.title,S.value=e.desc,x.value=e.dueDate;for(let t of g)if(t.id===e.priority){t.checked=!0;break}e.checklist.forEach((e=>{const t=document.createElement("li");t.textContent=e,j.appendChild(t)}))}(e),I=P.bind(this,e),w.textContent=e?"edit task":"add task",T.textContent=e?"save":"add",T.addEventListener("click",I),b.style.display="grid"}function D(){for(q.value="",S.value="",x.value="",g.forEach((e=>e.checked=!1));j.firstChild;)j.removeChild(j.firstChild);b.style.display="none",T.removeEventListener("click",I)}function P(t){let n;t||(t=new e,h().addTask(t)),t.title=q.value,t.desc=S.value,t.dueDate=x.value;for(let e of g)if(!0===e.checked){n=e;break}t.priority=n?n.value:"",t.checklist.splice(0);for(let e of j.childNodes)t.addToChecklist(e.textContent);document.querySelector(`[data-task-id='${t.id}']`)&&v(t.id),f(t),D()}b.querySelector(".cancel-btn").addEventListener("click",D),B.addEventListener("click",(function(){if(L.value){const e=document.createElement("li");e.textContent=L.value,j.appendChild(e),L.value=""}})),document.querySelector(".new-task-btn").addEventListener("click",(()=>A()))})();
//# sourceMappingURL=main.js.map