(()=>{"use strict";class e{constructor(t,n,c,o){this.id=e.id,e.id++,this.title=t,this.desc=n,this.dueDate=c,this.priority=o,this.checklist=[],this.isComplete=!1}addToChecklist(e){this.checklist.push(e)}}e.id=0;const t=document.querySelector(".tasks");function n(e){const n=document.createElement("div");n.setAttribute("data-task-id",e.id),n.classList.add("task");const c=document.createElement("div");c.classList.add("collapsible-items");const i=document.createElement("h4");i.textContent=e.title;const d=document.createElement("button");d.textContent="edit",d.addEventListener("click",H.bind(this,e));const s=document.createElement("button");s.classList.add("delete-btn"),s.textContent="delete";const l=document.createElement("p");l.textContent=e.desc;const r=document.createElement("p");r.textContent=e.dueDate;const a=document.createElement("p");a.textContent=e.priority;const u=document.createElement("ul");e.checklist.forEach((e=>{const t=document.createElement("li");t.textContent=e,u.appendChild(t)}));const m=document.createElement("input");m.setAttribute("type","checkbox"),m.checked=e.isComplete,c.append(l,a,u,d,s),c.style.display="none",n.append(m,i,r,c),n.addEventListener("click",o);let p=document.querySelector(`[data-task-id='${e.id+1}']`);p?t.insertBefore(n,p):t.appendChild(n)}function c(e){const n=document.querySelector(`[data-task-id='${e}']`);for(n.removeEventListener("click",o);n.firstChild;)n.removeChild(n.firstChild);t.removeChild(n)}function o(e){if(e.target!==this.querySelector("input")&&e.target!==this.querySelector("button")){const e=this.querySelector(".collapsible-items");e.style.display="none"===e.style.display?"block":"none"}}class i{constructor(e){this.id=i.id,i.id++,this.name=e,this.tasks=[]}addTask(e){this.tasks.push(e)}deleteTask(e){this.tasks.splice(this.tasks.indexOf(e),1)}deleteTaskById(e){for(let t=0;t<this.tasks.length;t++)if(this.tasks[t].id===+e)return void this.tasks.splice(t,1)}}i.id=0;const d=document.querySelector(".tasks"),s=document.querySelector(".tasks h2"),l=document.querySelector(".project-rename"),r=document.querySelector(".rename-project-btn"),a=document.getElementById("project-rename-input"),u=document.querySelector(".project-rename-confirm"),m=document.querySelector(".project-rename-cancel");function p(e){s.textContent=e.name,e.tasks.forEach((e=>n(e)))}function y(){s.textContent="",j().tasks.forEach((e=>{c(e.id)}))}function h(){"none"!==l.style.display&&l.style.display?(l.style.display="none",a.value="",s.style.display="block",r.style.visibility="visible"):(l.style.display="block",a.value=s.textContent,s.style.display="none",r.style.visibility="hidden")}d.addEventListener("click",(function(e){if("delete-btn"===e.target.className){const t=e.target.parentNode.parentNode.getAttribute("data-task-id");j().deleteTaskById(t),c(t),localStorage.setItem(`project${j().id}`,JSON.stringify(j()))}})),r.addEventListener("click",h),m.addEventListener("click",h),u.addEventListener("click",(function(){a.value&&(s.textContent=a.value,j().name=a.value,document.querySelector(`[data-proj-id='${j().id}']`).querySelector("p").textContent=a.value,h(),localStorage.setItem(`project${j().id}`,JSON.stringify(j())))}));const k=document.querySelector(".projects"),f=document.querySelector(".new-project-btn"),v=document.querySelector(".new-project-input"),E=document.getElementById("new-project"),S=document.querySelector(".add-project-btn"),C=document.querySelector(".cancel-project-btn"),b=document.querySelector(".icon-color-picker"),g=new class{constructor(){this.projects=[]}addProject(e){this.projects.push(e)}deleteProject(e){this.projects.splice(this.projects.indexOf(e),1)}};let q;function j(){return q}function x(e){const t=document.querySelector(`[data-proj-id='${e.id}']`);for(;t.firstChild;)t.removeChild(t.firstChild);t.parentNode.removeChild(t),g.deleteProject(e),localStorage.removeItem(`project${e.id}`)}function L(e){const t=document.createElement("div");t.setAttribute("data-proj-id",e.id);const n=document.createElement("span"),c=document.createElement("p"),o=document.createElement("button");o.classList.add("project-delete-btn"),o.textContent="x",o.addEventListener("click",x.bind(this,e)),c.textContent=e.name,t.append(n,c,o),k.insertBefore(t,f),n.addEventListener("click",I),t.addEventListener("click",(()=>{y(),p(e),q=e}))}function I(){"block"===b.style.display?b.style.display="none":b.style.display="block",b.setAttribute("data-proj",this.parentNode.getAttribute("data-proj-id")),b.style.top=`calc(${this.parentNode.offsetTop}px - 2em)`}function N(){const e=getComputedStyle(this).backgroundColor,t=this.parentNode.getAttribute("data-proj");document.querySelector(`[data-proj-id='${t}']`).querySelector("span").style.backgroundColor=e,b.style.display="none"}function T(){f.style.display="inline",v.style.display="none",E.value=""}f.addEventListener("click",(function(){f.style.display="none",v.style.display="block"})),S.addEventListener("click",(function(){if(E.value){const e=new i(E.value);g.addProject(e),L(e),y(),p(e),q=e,T(),localStorage.setItem(`project${e.id}`,JSON.stringify(e))}})),C.addEventListener("click",T),b.querySelectorAll("span").forEach((e=>{e.addEventListener("click",N)})),function(){const t=new i("tasks"),n=new e("task a","a description","06-12-1970","medium");n.addToChecklist("a"),n.addToChecklist("b");const c=new e("task b","b description","09-13-2023","high");c.addToChecklist("c"),c.addToChecklist("d"),t.addTask(n),t.addTask(c),q=t,L(t),p(t)}();const $=document.querySelector("form"),w=document.getElementById("title"),B=document.getElementById("description"),A=document.getElementById("due-date"),O=document.getElementById("checklist"),J=document.querySelector(".checklist-items"),D=document.querySelectorAll('[type="radio"]'),P=$.querySelector("h3"),z=$.querySelector(".checklist-btn"),F=$.querySelector(".confirm-btn");let G;function H(e){e&&function(e){w.value=e.title,B.value=e.desc,A.value=e.dueDate;for(let t of D)if(t.id===e.priority){t.checked=!0;break}e.checklist.forEach((e=>{const t=document.createElement("li");t.textContent=e,J.appendChild(t)}))}(e),G=M.bind(this,e),P.textContent=e?"edit task":"add task",F.textContent=e?"save":"add",F.addEventListener("click",G),$.style.display="grid"}function K(){for(w.value="",B.value="",A.value="",D.forEach((e=>e.checked=!1));J.firstChild;)J.removeChild(J.firstChild);$.style.display="none",F.removeEventListener("click",G)}function M(t){let o;t||(t=new e,j().addTask(t)),t.title=w.value,t.desc=B.value,t.dueDate=A.value;for(let e of D)if(!0===e.checked){o=e;break}t.priority=o?o.value:"",t.checklist.splice(0);for(let e of J.childNodes)t.addToChecklist(e.textContent);document.querySelector(`[data-task-id='${t.id}']`)&&c(t.id),localStorage.setItem(`task${t.id}`,JSON.stringify(t)),localStorage.setItem(`project${j().id}`,JSON.stringify(j())),n(t),K()}$.querySelector(".cancel-btn").addEventListener("click",K),z.addEventListener("click",(function(){if(O.value){const e=document.createElement("li");e.textContent=O.value,J.appendChild(e),O.value=""}})),window.addEventListener("load",(()=>{for(let e=0;e<localStorage.length;e++)console.log(JSON.parse(localStorage.getItem(localStorage.key(e))))})),document.querySelector(".new-task-btn").addEventListener("click",(()=>H()))})();
//# sourceMappingURL=main.js.map